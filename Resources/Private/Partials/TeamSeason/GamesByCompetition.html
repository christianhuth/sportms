<html data-namespace-typo3-fluid="true"
      xmlns:sportms="Balumedien\Sportms\ViewHelpers"
      xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers">

<div class="tx-sportms-teamseason-gamesbycompetition">
    <f:if condition="{games}">
        <f:then>
            <f:groupedFor as="gamesByCompetition" each="{games}" groupBy="competitionSeason" groupKey="competitionSeason">
                <div class="table-responsive">
                    <h3>{competitionSeason.competition.label}</h3>
                    <table class="table table-bordered table-hover table-striped">
                        <thead>
                        <tr>
                            <th>Spieltag</th>
                            <th>Datum</th>
                            <th>Uhrzeit</th>
                            <th>Ort</th>
                            <th>Gegner</th>
                            <th>Zuschauer</th>
                            <th>Ergebnis</th>
                        </tr>
                        </thead>
                        <tbody>
                        <f:for as="game" each="{gamesByCompetition}">
                            <tr>
                                <td class="tx-sportms-table-center"><sportms:link.action action="games" controller="CompetitionSeason" CompetitionSeason="{game.competitionSeason}" CompetitionSeasonGameday="{game.gameday}">{game.gameday.label}</sportms:link.action></td>
                                <td class="tx-sportms-table-center"><f:format.date format="{settings.format.dateLong}">{game.date}</f:format.date></td>
                                <td class="tx-sportms-table-center"><f:format.date format="{settings.format.timeLong}">{game.time}</f:format.date></td>
                                <td class="tx-sportms-table-center">
                                    <f:if condition="{teamSeason} == {game.teamSeasonHome}">
                                        <f:then>
                                            H
                                        </f:then>
                                        <f:else>
                                            A
                                        </f:else>
                                    </f:if>
                                </td>
                                <td>
                                    <f:if condition="{teamSeason} == {game.teamSeasonHome}">
                                        <f:then>
                                            <sportms:link.action action="index" controller="TeamSeason" TeamSeason="{game.teamSeasonGuest}">{game.teamSeasonGuest.team.label}</sportms:link.action>
                                        </f:then>
                                        <f:else>
                                            <sportms:link.action action="index" controller="TeamSeason" TeamSeason="{game.teamSeasonHome}">{game.teamSeasonHome.team.label}</sportms:link.action>
                                        </f:else>
                                    </f:if>
                                </td>
                                <td class="tx-sportms-table-center"><f:render partial="ViewHelper/Game/Spectators" arguments="{spectators: game.spectators}"/></td>
                                <td class="tx-sportms-table-center"><f:render partial="ViewHelper/Game/Result" section="default" arguments="{game: game}" /></td>
                            </tr>
                        </f:for>
                        </tbody>
                    </table>
                </div>
            </f:groupedFor>
        </f:then>
        <f:else>
            <div class="table-responsive">
                <table class="table table-bordered table-hover table-striped">
                    <thead>
                    <tr>
                        <th>Spieltag</th>
                        <th>Datum</th>
                        <th>Uhrzeit</th>
                        <th>Ort</th>
                        <th>Gegner</th>
                        <th>Zuschauer</th>
                        <th>Ergebnis</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td colspan="7">Keine Spiele gefunden.</td>
                    </tr>
                </tbody>
                </table>
            </div>
        </f:else>
    </f:if>
</div>

</html>