stages:
    - lint

lint:typoscriptcgl:
    image: composer:1.6
    stage: lint
    script:
        - wget -O phive.phar https://phar.io/releases/phive.phar
        - wget -O phive.phar.asc https://phar.io/releases/phive.phar.asc
        - gpg --keyserver hkps://keys.openpgp.org --recv-keys 0x9D8A98B29B2D5D79
        - gpg --verify phive.phar.asc phive.phar
        - chmod +x phive.phar
        - sudo mv phive.phar /usr/local/bin/phive
        - phive install martin-helmich/typo3-typoscript-lint
        - ./tools/typoscript-lint *.ts

lint:yaml:
    image: python:alpine3.7
    stage: lint
    before_script:
        - pip install yamllint==1.10.0
    script:
        - yamllint -c yamllint.yaml localPackages/ yamllint.yaml .gitlab-ci.yml tslint.yaml
